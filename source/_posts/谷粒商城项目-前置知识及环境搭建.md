---
title: 谷粒商城项目-前置知识及环境搭建
date: 2021-07-02 17:10:07
tags: Java
---

# 分布式基础概念

## 微服务

## 集群&分布式&节点

- 集群是个物理形态，分布式是个工作方式。

- 分布式是指不同的业务分布在不同的地方；集群指的是将几台服务器集中在一起，实现同一业务。
- 分布式中的每个节点，都可以做集群；而集群不一定就是分布式。

## 远程调用

在分布式系统中，各个服务可能处于不同的主机，服务之间不可避免需要互相调用，称为远程调用。SpringCloud中使用HTTP + JSON完成远程调用。

## 负载均衡

常见的负载均衡算法：

轮询：为第一个请求选择健康池中的第一个后端服务器，后续请求按照顺序依次选择服务器，直到最后一个，之后循环。

最小连接数：优先选择连接数最少的服务器。在会话较长的情况下可以考虑采用这种方式。

散列：根据请求源IP的散列（hash）来选择要转发的服务器。这种方式可以一定程度上保证特定用户能够连接到相同的服务器。如果应用需要处理状态而要求用户能够连接到与之前相同的服务器，可以考虑这种方式。

## 服务注册/发现&注册中心

A服务调用B服务，A服务想要知道B服务处在哪几台服务器以及服务器的状态，需要引入注册中心。如果某些服务已下线，可以感知到服务器状态的变化，从而避免调用不可用的服务。

## 配置中心

## 服务熔断&服务降级

- 服务熔断：设置服务超时时间，当被调用的服务失败次数达到某个阈值，直接开启断路保护机制，后续的请求不再去调用这个服务，本地直接返回默认的数据。
- 服务降级：在运维期间，当系统处于高峰期，系统资源紧张，可以让某些非核心业务降级运行。降级：某些服务不处理，或者简单处理（抛异常、返回NULL、调用Mock数据、调用Fallback处理逻辑）。

## API网关

API网关抽象了微服务中都需要的功能，同时提供了客户端负载均衡，服务自动熔断，灰度发布，统一认证，限流流控，日志统计等丰富的功能。

# 环境搭建

![](https://cdn.jsdelivr.net/gh/Polar1sssss/FigureBed/img/guli001.png)

![](https://cdn.jsdelivr.net/gh/Polar1sssss/FigureBed/img/guli002.png)
